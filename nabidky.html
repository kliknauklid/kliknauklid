<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Nab√≠dky √∫klidu</title>
<style>
body{font-family:Arial;background:#f4f6fb;margin:0;padding:20px}
h1{text-align:center}
table{width:100%;border-collapse:collapse;background:white}
th,td{border:1px solid #ccc;padding:8px;text-align:left}
th{background:#1f2a6d;color:white}
.lock{color:red;font-weight:bold}
.btn{padding:6px 10px;background:#1f2a6d;color:white;border:none;border-radius:5px;cursor:pointer}
</style>
</head>

<body>

<h1>Nab√≠dky √∫klidu</h1>
<p style="text-align:center">Kontakty jsou skryt√© üîí ‚Äì odemknou se po zaplacen√≠</p>

<table>
<thead>
<tr>
<th>Vlo≈æen√≠</th>
<th>Mƒõsto</th>
<th>Dojezd</th>
<th>Typ √∫klidu</th>
<th>Dostupnost</th>
<th>Cena</th>
<th>Zku≈°enost</th>
<th>Pozn√°mka</th>
<th>Kontakt</th>
</tr>
</thead>

<tbody id="data"></tbody>
</table>

<script>
// ===== DATA API =====
const DATA_API = "https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLgUTQlY34l62hKBqMhtIr3UZpRHbgEAjsKYaTFg4V2IP3Mqtpb2PEFhdC0aM-ze_DrgADZ_7vbrJD8dp842NGEGlpvUueQAqVkIcb6bvY4L3BwhjvR-ewplWoVBgCkXRKT3myGvKXs0JwKFeKtNG1oJIUruSgcWjWawpbaaiP7iQuFgByY7Di9cTCGOLK4f9rdWCM_XZkKf62Q9jgTcwp_jfx63J2CPYGYHAFFmmdQtrRv2WOJ98RN6jO-3Xg361iR5_qPfmOdI-tvJ1FPWLVg8u3hVyeihhWPki4dg&lib=M1uTt_cSLFRneBAl08ihj4ATv7YRnEe7N";  

// ===== MAIL API =====
const MAIL_API = "https://script.google.com/macros/s/AKfycbxJs061Eq-DJpWFkqYS5BMdyDG1KdhzfpP7tu8zVHXK7bAJ2GOkcvNqjZvBv355zcpVKw/exec";

fetch(DATA_API)
.then(r=>r.json())
.then(data=>{
  let html="";
  data.forEach((row,i)=>{
    html+=`
    <tr>
      <td>${row.vlozeni}</td>
      <td>${row.mesto}</td>
      <td>${row.dojezd}</td>
      <td>${row.typUklidu}</td>
      <td>${row.dostupnost}</td>
      <td>${row.cena}</td>
      <td>${row.zkusenost}</td>
      <td>${row.poznamka}</td>
      <td><button class="btn" onclick="unlock(${i})">Odemknout kontakt</button></td>
    </tr>`;
  });
  document.getElementById("data").innerHTML = html;
});

function unlock(id){
  const email = prompt("Zadej e-mail pro zasl√°n√≠ platebn√≠ch √∫daj≈Ø:");
  if(!email) return;

  fetch(MAIL_API,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({email:email,offer:id})
  });

  alert("Platebn√≠ √∫daje byly odesl√°ny na e-mail.");
}
</script>

</body>
</html>
